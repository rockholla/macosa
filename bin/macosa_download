#!/bin/bash

update=false

branch="${1:-master}"

if [ "$2" == "update" ]; then
  update=true
fi

cd ~/Downloads
printf "Downloading MacOSa source files...\n"
rm -rf ~/Downloads/macosa* &>/dev/null
rm -rf ~/Downloads/rockholla* &>/dev/null
rm -rf ~/Downloads/macosa.zip &>/dev/null
curl -L -o macosa.zip https://github.com/rockholla/macosa/zipball/$branch/
unzip macosa.zip &>/dev/null
mv rockholla-macosa* macosa
rm -rf macosa/docs
rm macosa.zip
if $update; then
  rsync -a --delete --exclude user --exclude .vaultpass --exclude .downloads ~/Downloads/macosa/ ~/.macosa/
  printf "MacOSa update complete\n"
fi
